#!/usr/bin/env bash
# functions FOR CREATING systemd .service files
systemd_Template()
{
if [[ -f /etc/systemd/system/monero-bash-$SERVICE.service ]]; then
	print_Error "monero-bash-${SERVICE}.service already exists"
else
	$white; echo "Creating monero-bash-$SERVICE.service..."
prompt_Sudo
error_Sudo
sudo sh -c "cat <<EOM > /etc/systemd/system/monero-bash-$SERVICE.service
[Unit]
Description=monero-bash-$SERVICE
After=network.target

[Service]
User=$USER
Type=simple
ExecStart=$COMMAND
Restart=always

[Install]
WantedBy=multi-user.target
EOM"
$white; echo "Reloading systemd..."
sudo systemctl daemon-reload
fi
}

systemd_Monero()
{
	local COMMAND="$binMonero/monerod --data-dir "$DATA_PATH" --config-file "$config/monerod.conf" --non-interactive --zmq-pub tcp://127.0.0.1:18083"
	systemd_Template
}

systemd_XMRig()
{
	local USER="root"
	local COMMAND="$binXMRig/xmrig --config $config/xmrig.json"
	systemd_Template
}

systemd_P2Pool()
{
	local COMMAND=""
	systemd_Template
}

systemd_MoneroBash()
{
	echo "monero-bash: systemd not needed"
}
