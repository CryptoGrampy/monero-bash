#!/usr/bin/env bash
# functions FOR CREATING systemd .service files
systemd_Template()
{
$white; echo "Creating $SERVICE..."
prompt_Sudo
error_Sudo
sudo sh -c "cat <<EOM > $sysd/$SERVICE
[Unit]
Description=$SERVICE
After=network.target

[Service]
User=$USER
Type=simple
ExecStart=$COMMAND
Restart=always

[Install]
WantedBy=multi-user.target
EOM"
$white; echo "Reloading systemd..."
sudo systemctl daemon-reload
}

systemd_Monero()
{
	define_Monero
	local COMMAND="$binMonero/monerod --data-dir "$DATA_PATH" --config-file "$config/monerod.conf" --non-interactive --zmq-pub tcp://127.0.0.1:18083"
	systemd_Template
}

systemd_XMRig()
{
	define_XMRig
	local USER="root"
	local COMMAND="$binXMRig/xmrig --config $xmrigConf"
	systemd_Template
}

systemd_P2Pool()
{
	define_P2Pool
	local USER="root"
	local COMMAND="$binP2Pool/p2pool --host $DAEMON_IP --wallet $WALLET --loglevel 2 --mini"
	systemd_Template
}

systemd_MoneroBash()
{
	echo "monero-bash: systemd not needed"
}
